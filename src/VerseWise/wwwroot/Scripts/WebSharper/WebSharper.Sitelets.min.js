(function(a){"use strict";var b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J;b=a.WebSharper=a.WebSharper||{};c=b.Sitelets=b.Sitelets||{};d=c.CorsAllows=c.CorsAllows||{};e=c.StringEncoding=c.StringEncoding||{};f=c.PathUtil=c.PathUtil||{};g=c.Route=c.Route||{};h=c.List=c.List||{};i=c.Router=c.Router||{};j=b&&b.Obj;k=c.RouterModule=c.RouterModule||{};l=k.ListArrayConverter=k.ListArrayConverter||{};m=c.RouterOperators=c.RouterOperators||{};n=a.StartupCode$WebSharper_Sitelets$Router=a.StartupCode$WebSharper_Sitelets$Router||{};o=b&&b.Strings;p=a.String;q=b&&b.List;r=b&&b.Seq;s=b&&b.Collections;t=s&&s.Map;u=b&&b.Arrays;v=a.IntelliFactory;w=v&&v.Runtime;x=s&&s.FSharpMap;y=b&&b.Unchecked;z=b&&b.Utils;A=a.console;B=b&&b.Lazy;C=b&&b.Nullable;D=b&&b.Numeric;E=b&&b.Operators;F=b&&b.Concurrency;G=b&&b.Char;H=a.System;I=H&&H.Guid;J=b&&b.Slice;d.New=function(K,L,M,N,O,P){return{Origins:K,Methods:L,Headers:M,ExposeHeaders:N,MaxAge:O,Credentials:P};};e.read=function(K){var L;function M(N){var O;while(true){O=e.readEscapedFromChars(N);if(O[0]===-2)return null;else if(O[0]===-1)return{$:1,$0:(function(P){return function(Q){return o.concat(P,Q);};}(""))(L)};else{L.push(p.fromCharCode(O[0]));N=O[1];}}}L=[];return M(q.ofSeq(r.map(function(N){return N.charCodeAt();},K)));};e.readEscapedFromChars=function(K){var L,M,N,O,P,Q,R,S;function T(){var V,W;return L.$==1?(V=L.$1,(W=L.$0,(L=V,W))):-1;}function U(V){return V>="0".charCodeAt()&&V<="9".charCodeAt()?V-"0".charCodeAt():V>="a".charCodeAt()&&V<="f".charCodeAt()?V-"a".charCodeAt()+10:V>="A".charCodeAt()&&V<="F".charCodeAt()?V-"A".charCodeAt()+10:-2;}L=K;return[(M=T(),M==="~".charCodeAt()?(N=T(),N==="u".charCodeAt()?(O=T(),(P=T(),(Q=T(),(R=T(),O>=0&&P>=0&&Q>=0&&R>=0?e.op_PlusPlus(e.op_PlusPlus(e.op_PlusPlus(U(O),U(P)),U(Q)),U(R)):-2)))):(S=T(),N>=0&&S>=0?e.op_PlusPlus(U(N),U(S)):-2)):M),L];};e.op_PlusPlus=function(K,L){return(K<<4)+L;};e.write=function(K){return o.concat("",r.mapi(function(L,M){return e.writeEscapedAsString(L+1===K.length,M);},K));};e.writeEscapedAsString=function(K,L){var M;M=L.charCodeAt();return e.isUnreserved(K,L)?L:M<256?"~"+o.PadLeftWith(M.toString(16),2,"0"):"~u"+o.PadLeftWith(M.toString(16),4,"0");};e.isUnreserved=function(K,L){return L==="-"||(L==="."?!K:L==="_"||(L>="A"&&L<="Z"||(L>="a"&&L<="z"||L>="0"&&L<="9")));};f.WriteLink=function(K,L){var M;M=L.get_IsEmpty()?"":"?"+f.WriteQuery(L);return"/"+f.Concat(K)+M;};f.WriteQuery=function(K){function L(M,N){return M+"="+N;}return o.concat("&",r.map(function(M){return L(M[0],M[1]);},t.ToSeq(K)));};f.Concat=function(K){var L,M;L=[];M=true;q.iter(function(N){if(!o.IsNullOrEmpty(N)){M?M=false:L.push("/");L.push(N);}},K);return o.Join("",u.ofSeq(L));};g=c.Route=w.Class({ToLink:function(){return f.WriteLink(this.Segments,this.QueryArgs);}},null,g);g.FromHash=function(K,L){var M,N;M=K.indexOf("#");return M===-1?g.get_Empty():(N=K.substring(M+1),L!=null&&L.$0?N===""||N==="/"?g.get_Empty():o.StartsWith(N,"/")?g.FromUrl(N.substring(1),{$:1,$0:true}):g.Segment$2(N):g.FromUrl(K.substring(M),{$:1,$0:false}));};g.FromUrl=function(K,L){var M,N,O;M=(N=K.indexOf("?"),N===-1?[K,new x.New([])]:[o.Substring(K,0,N),g.ParseQuery(K.substring(N+1))]);O=g.get_Empty();return g.New(q.ofArray(o.SplitChars(M[0],["/"],L!=null&&L.$0?0:1)),M[1],O.FormData,O.Method,O.Body);};g.WriteQuery=function(K){return f.WriteQuery(K);};g.ParseQuery=function(K){return t.OfArray(u.ofSeq(u.choose(function(L){var M,N;M=o.SplitChars(L,["="],0);return!y.Equals(M,null)&&M.length===2?(N=u.get(M,1),{$:1,$0:[u.get(M,0),N]}):((function(O){return function(P){return O("wrong format for query argument: "+z.toSafe(P));};}(function(O){A.log(O);}))(L),null);},o.SplitChars(K,["&"],0))));};g.Combine=function(K){var L,M,N,O,P,Q,R;L=u.ofSeq(K);M=u.length(L);return M===0?g.get_Empty():M===1?u.get(L,0):(N=null,O=null,P=[],Q=new x.New([]),R=new x.New([]),u.iter(function(S){var T,U;T=S.Method;if(T!=null&&T.$==1)N=T;U=S.Body.f();if(U===null);else O=U;Q=t.FoldBack(function(V,W,X){return X.Add(V,W);},Q,S.QueryArgs);R=t.FoldBack(function(V,W,X){return X.Add(V,W);},R,S.FormData);q.iter(function(V){P.push(V);},S.Segments);},L),g.New(q.ofSeq(P),Q,R,N,B.CreateFromValue(O)));};g.Segment=function(K,L){var M;M=g.get_Empty();return g.New(K,M.QueryArgs,M.FormData,L,M.Body);};g.Segment$1=function(K){var L;L=g.get_Empty();return g.New(K,L.QueryArgs,L.FormData,L.Method,L.Body);};g.Segment$2=function(K){var L;L=g.get_Empty();return g.New(q.ofArray([K]),L.QueryArgs,L.FormData,L.Method,L.Body);};g.get_Empty=function(){return g.New(q.T.Empty,new x.New([]),new x.New([]),null,B.CreateFromValue(null));};g.New=function(K,L,M,N,O){return new g({Segments:K,QueryArgs:L,FormData:M,Method:N,Body:O});};h.startsWith=function(K,L){var M;switch(K.$==1?L.$==1?y.Equals(K.$0,L.$0)?(M=[L.$0,L.$1,K.$0,K.$1],1):2:2:0){case 0:return{$:1,$0:L};case 1:return h.startsWith(M[3],M[1]);case 2:return null;}};i.op_Addition=function(K,L){return i.New(function(M){return r.append(K.Parse(M),L.Parse(M));},K.Segment);};i.op_Division=function(K,L){return i.New(function(M){return r.collect(L.Parse,K.Parse(M));},r.append(K.Segment,L.Segment));};i.FromString=function(K){var L,M;L=o.SplitChars(K,["/"],1);return L.length==0?i.New(function(N){return[N];},[]):(M=q.ofArray(L),i.New(function(N){var O;O=h.startsWith(M,N.Segments);return O!=null&&O.$==1?[g.New(O.$0,N.QueryArgs,N.FormData,N.Method,N.Body)]:[];},[g.Segment$1(M)]));};i.New=function(K,L){return{Parse:K,Segment:L};};i.op_Addition$1=function(K,L){return i.New$1(function(M){return r.append(K.Parse(M),L.Parse(M));},function(M){var N;N=K.Write(M);return N==null?L.Write(M):N;});};i.op_Division$1=function(K,L){return i.New$1(function(M){function N(O,P){return r.map(function(Q){return[Q,P];},L.Parse(O));}return r.collect(function(O){return N(O[0],O[1]);},K.Parse(M));},function(M){var N;N=K.Write(M);return N==null?null:{$:1,$0:r.append(N.$0,L.Segment)};});};i.op_Division$2=function(K,L){return i.New$1(function(M){return r.collect(L.Parse,K.Parse(M));},function(M){var N;N=L.Write(M);return N==null?null:{$:1,$0:r.append(K.Segment,N.$0)};});};i.op_Division$3=function(K,L){return i.New$1(function(M){function N(O,P){function Q(R,S){return[R,[P,S]];}return r.map(function(R){return Q(R[0],R[1]);},L.Parse(O));}return r.collect(function(O){return N(O[0],O[1]);},K.Parse(M));},function(M){var N,O,P;N=K.Write(M[0]);O=L.Write(M[1]);return N!=null&&N.$==1&&(O!=null&&O.$==1&&(P=[N.$0,O.$0],true))?{$:1,$0:r.append(P[0],P[1])}:null;});};i.New$1=function(K,L){return{Parse:K,Write:L};};l=k.ListArrayConverter=w.Class({WebSharper_Sitelets_RouterModule_IListArrayConverter$ToArray:function(K){return u.ofList(K);},WebSharper_Sitelets_RouterModule_IListArrayConverter$OfArray:function(K){return q.ofArray(K);}},j,l);l.New=w.Ctor(function(){j.New.call(this);},l);k.Cast=function(K,L,M){return i.New$1(function(N){function O(P,Q){var R;R=K(Q);return R!=null&&R.$==1?{$:1,$0:[P,R.$0]}:null;}return r.choose(function(P){return O(P[0],P[1]);},M.Parse(N));},function(N){var O;O=L(N);return O==null?null:M.Write(O.$0);});};k.Unbox=function(K,L){return i.New$1(function(M){function N(O,P){var Q;Q=K(P);return Q!=null&&Q.$==1?{$:1,$0:[O,Q.$0]}:null;}return r.choose(function(O){return N(O[0],O[1]);},L.Parse(M));},L.Write);};k.Box=function(K,L){return i.New$1(function(M){function N(O,P){return[O,P];}return r.map(function(O){return N(O[0],O[1]);},L.Parse(M));},function(M){var N;N=K(M);return N==null?null:L.Write(N.$0);});};k.List=function(K){return k.Map(q.ofArray,u.ofList,k.Array(K));};k.Option=function(K){return i.New$1(function(L){var M,N;N=L.Segments;function O(P,Q){return[P,{$:1,$0:Q}];}switch(N.$==1?N.$0==="None"?(M=N.$1,0):N.$0==="Some"?(M=N.$1,1):2:2){case 0:return[[g.New(M,L.QueryArgs,L.FormData,L.Method,L.Body),null]];case 1:return r.map(function(P){return O(P[0],P[1]);},K.Parse(g.New(M,L.QueryArgs,L.FormData,L.Method,L.Body)));case 2:return[];}},function(L){var M,N,O;return L!=null&&L.$==1?(M=K.Write(L.$0),(N=(O=[g.Segment$2("Some")],function(P){return r.append(O,P);}),M==null?null:{$:1,$0:N(M.$0)})):{$:1,$0:[g.Segment$2("None")]};});};k.Nullable=function(K){return i.New$1(function(L){var M,N;function O(P,Q){return[P,Q];}M=L.Segments;return M.$==1&&(M.$0==="null"&&(N=M.$1,true))?[[g.New(N,L.QueryArgs,L.FormData,L.Method,L.Body),null]]:r.map(function(P){return O(P[0],P[1]);},K.Parse(L));},function(L){return L!=null?K.Write(C.get(L)):{$:1,$0:[g.Segment$2("null")]};});};k.Array=function(K){return i.New$1(function(L){var M,N,O;function P(Q){return function(R){return function(S){function T(U,V){return((P(Q-1))(U))(new q.T({$:1,$0:V,$1:S}));}return Q===0?[[R,u.ofList(q.rev(S))]]:r.collect(function(U){return T(U[0],U[1]);},K.Parse(R));};};}M=L.Segments;return M.$==1?(N=(O=0,[D.TryParseInt32(M.$0,{get:function(){return O;},set:function(Q){O=Q;}}),O]),N[0]?((P(N[1]))(g.New(M.$1,L.QueryArgs,L.FormData,L.Method,L.Body)))(q.T.Empty):[]):[];},function(L){var M;M=u.map(K.Write,L);return u.forall(function(N){return N!=null;},M)?{$:1,$0:r.append([g.Segment$2(p(u.length(L)))],r.collect(function(N){return N.$0;},M))}:null;});};k.Delay=function(K){var L;L=B.Create(K);return i.New$1(function(M){return L.f().Parse(M);},function(M){return L.f().Write(M);});};k.Single=function(K,L){var M,N;M=o.SplitChars(L,["/"],1);return M.length==0?i.New$1(function(O){return[[O,K]];},function(O){return y.Equals(O,K)?{$:1,$0:[]}:null;}):(N=q.ofArray(M),i.New$1(function(O){var P;P=h.startsWith(N,O.Segments);return P!=null&&P.$==1?[[g.New(P.$0,O.QueryArgs,O.FormData,O.Method,O.Body),K]]:[];},function(O){return y.Equals(O,K)?{$:1,$0:[g.Segment$1(N)]}:null;}));};k.Table=function(K){function L(M,N){return k.MapTo(M,i.FromString(N));}return k.Sum(r.map(function(M){return L(M[0],M[1]);},K));};k.Sum=function(K){var L;L=u.ofSeq(K);return i.New$1(function(M){return r.collect(function(N){return N.Parse(M);},L);},function(M){return r.tryPick(function(N){return N.Write(M);},L);});};k.MapTo=function(K,L){return i.New$1(function(M){return r.map(function(N){return[N,K];},L.Parse(M));},function(M){return y.Equals(M,K)?{$:1,$0:L.Segment}:null;});};k.Filter=function(K,L){return i.New$1(function(M){function N(O){return O[1];}return r.filter(function(O){return K(N(O));},L.Parse(M));},function(M){return K(M)?L.Write(M):null;});};k.TryMap=function(K,L,M){return i.New$1(function(N){function O(P,Q){var R;R=K(Q);return R==null?null:{$:1,$0:[P,R.$0]};}return r.choose(function(P){return O(P[0],P[1]);},M.Parse(N));},function(N){var O;O=L(N);return O==null?null:M.Write(O.$0);});};k.Map=function(K,L,M){return i.New$1(function(N){function O(P,Q){return[P,K(Q)];}return r.map(function(P){return O(P[0],P[1]);},M.Parse(N));},function(N){return M.Write(L(N));});};k.Embed=function(K,L,M){return i.New$1(function(N){function O(P,Q){return[P,K(Q)];}return r.map(function(P){return O(P[0],P[1]);},M.Parse(N));},function(N){var O;O=L(N);return O==null?null:M.Write(O.$0);});};k.Slice=function(K,L,M){return i.New$1(function(N){function O(P,Q){var R;R=K(Q);return R==null?null:{$:1,$0:[P,R.$0]};}return r.choose(function(P){return O(P[0],P[1]);},M.Parse(N));},function(N){return M.Write(L(N));});};k.HashLink=function(K,L){return"#"+k.Link(K,L);};k.Fetch=function(K,L){return k.FetchWith(null,{},K,L);};k.FetchWith=function(K,L,M,N){var O,P,Q,R,S,T,U;O=L?L:{};P=k.Write(M,N);return P!=null&&P.$==1?(Q=P.$0,(O.method=(R=Q.Method,R==null?"POST":R.$0),S=Q.Body.f(),S===null?!Q.FormData.get_IsEmpty()?(T=new a.FormData(),t.Iterate(function(V,W){return T.append(V,W);},Q.FormData),O.body=T):void 0:O.body=S,U=Q.ToLink(),self.fetch(K==null?U:o.TrimEnd(K.$0,["/"])+U,O))):E.FailWith("Failed to map endpoint to request");};k.XHR=function(K,L){return k.XHRWith({ResponseT:"text",Url:"",IsAsync:true,Username:"",Password:"",Timeout:0,WithCredentials:false},K,L);};k.XHRWith=function(K,L,M){var N,O,P,Q,R;N=new a.XMLHttpRequest();O=k.Write(L,M);return O!=null&&O.$==1?(P=O.$0,(K.ResponseT===void 0?K.ResponseT="text":void 0,Q=(R=P.Method,R==null?"POST":R.$0),F.FromContinuations(function(S,T){var U,V,W;N.onload=function(){return S(N.response);};N.onerror=function(){return T(new a.Error(N.statusText));};U=P.ToLink();K.Url=K.Url?o.TrimEnd(K.Url,["/"])+U:U;if(K.Username!==""&&K.Password!=="")N.open(Q,K.Url,K.IsAsync,K.Username,K.Password);else N.open(Q,K.Url,K.IsAsync);if(K.Timeout!==0)N.timeout=K.Timeout;if(K.WithCredentials)N.withCredentials=K.WithCredentials;V=P.Body.f();return V===null?!P.FormData.get_IsEmpty()?(W=new a.FormData(),(t.Iterate(function(X,Y){return W.append(X,Y);},P.FormData),N.send(W))):N.send():N.send(V);}))):E.FailWith("Failed to map endpoint to request");};k.Link=function(K,L){var M;M=k.Write(K,L);return M==null?"":M.$0.ToLink();};k.TryLink=function(K,L){var M;M=k.Write(K,L);return M==null?null:{$:1,$0:M.$0.ToLink()};};k.Write=function(K,L){var M;M=K.Write(L);return M==null?null:{$:1,$0:g.Combine(M.$0)};};k.Parse=function(K,L){function M(N,O){return N.Segments.$==0?{$:1,$0:O}:null;}return r.tryPick(function(N){return M(N[0],N[1]);},K.Parse(L));};k.FormData=function(K){return i.New$1(function(L){function M(N,O){return[L,O];}return r.map(function(N){return M(N[0],N[1]);},K.Parse(g.New(L.Segments,L.FormData,L.FormData,L.Method,L.Body)));},function(L){var M;M=K.Write(L);return M==null?null:{$:1,$0:r.map(function(N){return g.New(N.Segments,new x.New([]),N.QueryArgs,N.Method,N.Body);},M.$0)};});};k.Body=function(K,L){return i.New$1(function(M){var N,O;N=M.Body.f();return N===null?[]:(O=K(N),O!=null&&O.$==1?[[g.New(M.Segments,M.QueryArgs,M.FormData,M.Method,B.CreateFromValue(null)),O.$0]]:[]);},function(M){var N;return{$:1,$0:[(N=g.get_Empty(),g.New(N.Segments,N.QueryArgs,N.FormData,N.Method,B.CreateFromValue(L(M))))]};});};k.Method=function(K){var L;return i.New(function(M){var N,O;N=M.Method;return N!=null&&N.$==1&&(N.$0===K&&(O=N.$0,true))?[M]:[];},[(L=g.get_Empty(),g.New(L.Segments,L.QueryArgs,L.FormData,{$:1,$0:K},L.Body))]);};k.QueryNullable=function(K,L){return i.New$1(function(M){var N,O,P;function Q(R,S){return[g.New(M.Segments,O,M.FormData,M.Method,M.Body),S];}N=M.QueryArgs.TryFind(K);return N!=null&&N.$==1?(O=M.QueryArgs.Remove(K),r.map(function(R){return Q(R[0],R[1]);},L.Parse((P=g.get_Empty(),g.New(q.ofArray([N.$0]),P.QueryArgs,P.FormData,P.Method,P.Body))))):[[M,null]];},function(M){var N,O,P,Q;return M!=null?(N=L.Write(C.get(M)),N==null?null:{$:1,$0:(O=g.Combine(N.$0).Segments,O.$==1&&(O.$1.$==0&&(P=O.$0,true))?[(Q=g.get_Empty(),g.New(Q.Segments,t.OfArray(u.ofSeq(q.ofArray([[K,P]]))),Q.FormData,Q.Method,Q.Body))]:[])}):{$:1,$0:[]};});};k.QueryOption=function(K,L){return i.New$1(function(M){var N,O,P;function Q(R,S){return[g.New(M.Segments,O,M.FormData,M.Method,M.Body),{$:1,$0:S}];}N=M.QueryArgs.TryFind(K);return N!=null&&N.$==1?(O=M.QueryArgs.Remove(K),r.map(function(R){return Q(R[0],R[1]);},L.Parse((P=g.get_Empty(),g.New(q.ofArray([N.$0]),P.QueryArgs,P.FormData,P.Method,P.Body))))):[[M,null]];},function(M){var N,O,P,Q;return M!=null&&M.$==1?(N=L.Write(M.$0),N==null?null:{$:1,$0:(O=g.Combine(N.$0).Segments,O.$==1&&(O.$1.$==0&&(P=O.$0,true))?[(Q=g.get_Empty(),g.New(Q.Segments,t.OfArray(u.ofSeq(q.ofArray([[K,P]]))),Q.FormData,Q.Method,Q.Body))]:[])}):{$:1,$0:[]};});};k.Query=function(K,L){return i.New$1(function(M){var N,O,P;function Q(R,S){return[g.New(M.Segments,O,M.FormData,M.Method,M.Body),S];}N=M.QueryArgs.TryFind(K);return N!=null&&N.$==1?(O=M.QueryArgs.Remove(K),r.map(function(R){return Q(R[0],R[1]);},L.Parse((P=g.get_Empty(),g.New(q.ofArray([N.$0]),P.QueryArgs,P.FormData,P.Method,P.Body))))):[];},function(M){var N,O,P,Q;N=L.Write(M);return N==null?null:{$:1,$0:(O=g.Combine(N.$0).Segments,O.$==1&&(O.$1.$==0&&(P=O.$0,true))?[(Q=g.get_Empty(),g.New(Q.Segments,t.OfArray(u.ofSeq(q.ofArray([[K,P]]))),Q.FormData,Q.Method,Q.Body))]:[])};});};k.CreateWithQuery=function(K,L){return i.New$1(function(M){var N;N=L(M.Segments,M.QueryArgs);return N==null?[]:[[g.New(q.T.Empty,M.QueryArgs,M.FormData,M.Method,M.Body),N.$0]];},function(M){var N,O;N=K(M);return{$:1,$0:[(O=g.get_Empty(),g.New(N[0],N[1],O.FormData,O.Method,O.Body))]};});};k.Create=function(K,L){return i.New$1(function(M){var N;N=L(M.Segments);return N==null?[]:[[g.New(q.T.Empty,M.QueryArgs,M.FormData,M.Method,M.Body),N.$0]];},function(M){return{$:1,$0:[g.Segment$1(K(M))]};});};k.New=function(K,L){var M;M={WebSharper_Sitelets_IRouter_1$Route:K,WebSharper_Sitelets_IRouter_1$Link:L};j.New.call(M);return M;};k.Empty=function(){n.$cctor();return n.Empty;};m.JSClass=function(K,L,M,N){var O,P;function Q(T){function U(V,W,X){var Y;return W?(Y=T[V],y.Equals(Y,void 0)?null:{$:1,$0:Y}):T[V];}return u.map(function(V){return U(V[0],V[1],V[2]);},L);}function R(T){var U;function V(W,X,Y){return function(Z){if(X){if(Z!=null&&Z.$==1)U[W]=Z.$0;}else U[W]=Z;};}U=K();(((w.Curried3(u.iter2))(function(W,X){return(function(Y){return V(Y[0],Y[1],Y[2]);}(W))(X);}))(L))(T);return U;}function S(T,U){return[T,q.ofSeq(r.map(function(V){return typeof V=="number"?{$:1,$0:[V,(u.get(L,V))[2]]}:{$:0,$0:V};},U))];}O=u.map(function(T){return S(T[0],T[1]);},M);P=i.New$1(function(T){function U(W,X,Y){var Z,_0,_1,_2,_3,_4,_5,_6;while(true){if(W.$==1){if(W.$0.$==1){Z=W.$0.$0[1];_0=W.$0.$0[0];_1=W.$1;_2=Z.Parse(X);return(function(_7){return function(_8){return r.collect(_7,_8);};}(function(_7,_8,_9){return function(_){var $;$=_7.slice();u.set($,_8,_[1]);return U(_9,_[0],$);};}(Y,_0,_1)))(_2);}else{_4=W.$0.$0;_5=W.$1;_6=X.Segments;if(_6.$==1&&(_6.$0===_4&&(_3=[_6.$0,_6.$1],true))){W=_5;X=g.New(_3[1],X.QueryArgs,X.FormData,X.Method,X.Body);}else return[];}}else return[[X,R(Y)]];}}function V(W,X){return m.isCorrectMethod(W,T.Method)?U(X,T,u.create(u.length(L),null)):[];}return r.collect(function(W){return V(W[0],W[1]);},O);},function(T){var U,V,W,X,Y,Z;U=Q(T);V=u.get(M,0);W=V[0];X=u.map(function(_0){return typeof _0=="number"?(u.get(L,_0))[2].Write(u.get(U,_0)):{$:1,$0:[g.Segment$2(_0)]};},V[1]);return u.forall(function(_0){return _0!=null;},X)?(Y=r.collect(function(_0){return _0.$0;},X),W==null?{$:1,$0:Y}:{$:1,$0:r.append([(Z=g.get_Empty(),g.New(Z.Segments,Z.QueryArgs,Z.FormData,W,Z.Body))],Y)}):null;});return N.length==0?P:k.Sum(r.append(N,[P]));};m.JSUnion=function(K,L){var M;function N(R){var S;function T(U){return U!=null&&U.$==1&&y.Equals(R,U.$0);}S=r.tryFindIndex(function(U){return T(U[0]);},L);return S!=null&&S.$==1?S.$0:R.$;}function O(R,S){return u.init(u.length((u.get(L,R))[2]),function(T){return S["$"+p(T)];});}function P(R,S){var T,U,V;T=K==null?{}:new K();U=u.get(L,R);return(V=U[0],V!=null&&V.$==1)?U[0].$0:(T.$=R,r.iteri(function(W,X){T["$"+p(W)]=X;},S),T);}function Q(R,S){var T;function U(V,W){return[R,V,W,T];}T=S[2];return r.map(function(V){return U(V[0],V[1]);},S[1]);}M=u.ofSeq(r.collect(function(R){return Q(R[0],R[1]);},r.indexed(L)));return i.New$1(function(R){function S(T,U,V,W){var X,Y,Z;function _0(_1){return function(_2){return function(_3){var _4;function _5(_6,_7){return((_0(_4))(_6))(new q.T({$:1,$0:_7,$1:_3}));}return _1.$==1?(_4=_1.$1,r.collect(function(_6){return _5(_6[0],_6[1]);},_1.$0.Parse(_2))):[[_2,P(T,u.ofList(q.rev(_3)))]];};};}return m.isCorrectMethod(U,R.Method)?(X=h.startsWith(q.ofArray(V),R.Segments),X==null?[]:(Y=X.$0,(Z=q.ofArray(W),Z.$==0?[[g.New(Y,R.QueryArgs,R.FormData,R.Method,R.Body),P(T,[])]]:((_0(Z))(g.New(Y,R.QueryArgs,R.FormData,R.Method,R.Body)))(q.T.Empty)))):[];}return r.collect(function(T){return S(T[0],T[1],T[2],T[3]);},M);},function(R){var S,T,U,V,W,X;function Y(Z,_0){return _0.Write(Z);}S=N(R);T=u.get(L,S);U=T[2];V=u.get(T[1],0);W=[g.Segment(q.ofArray(V[1]),V[0])];return U.length==0?{$:1,$0:W}:(X=(((w.Curried3(u.map2))(Y))(O(S,R)))(U),u.forall(function(Z){return Z!=null;},X)?{$:1,$0:r.append(W,r.collect(function(Z){return Z.$0;},X))}:null);});};m.isCorrectMethod=function(K,L){return L!=null&&L.$==1?K!=null&&K.$==1?y.Equals(L.$0,K.$0):true:!(K!=null&&K.$==1);};m.JSRecord=function(K,L){var M,N;function O(R){function S(T,U,V){var W;return U?(W=R[T],y.Equals(W,void 0)?null:{$:1,$0:W}):R[T];}return u.map(function(T){return S(T[0],T[1],T[2]);},L);}function P(R){var S;function T(U,V,W){return function(X){if(V){if(X!=null&&X.$==1)S[U]=X.$0;}else S[U]=X;};}S=K==null?{}:new K();(((w.Curried3(u.iter2))(function(U,V){return(function(W){return T(W[0],W[1],W[2]);}(U))(V);}))(L))(R);return S;}function Q(R,S,T){return T;}M=u.map(function(R){return Q(R[0],R[1],R[2]);},L);N=q.ofArray(M);return i.New$1(function(R){function S(T){return function(U){return function(V){var W;function X(Y,Z){return((S(W))(Y))(new q.T({$:1,$0:Z,$1:V}));}return T.$==1?(W=T.$1,r.collect(function(Y){return X(Y[0],Y[1]);},T.$0.Parse(U))):[[U,P(u.ofList(q.rev(V)))]];};};}return((S(N))(R))(q.T.Empty);},function(R){var S;function T(U,V){return V.Write(U);}S=(((w.Curried3(u.map2))(T))(O(R)))(M);return u.forall(function(U){return U!=null;},S)?{$:1,$0:r.collect(function(U){return U.$0;},S)}:null;});};m.JSTuple=function(K){return m.Tuple(function(L){return u.init(u.length(K),function(M){return L[M];});},a.id,K);};m.Tuple=function(K,L,M){return i.New$1(function(N){function O(P){return function(Q){return function(R){var S;function T(U,V){return((O(S))(U))(new q.T({$:1,$0:V,$1:R}));}return P.$==1?(S=P.$1,r.collect(function(U){return T(U[0],U[1]);},P.$0.Parse(Q))):[[Q,L(u.ofList(q.rev(R)))]];};};}return((O(q.ofArray(M)))(N))(q.T.Empty);},function(N){var O;function P(Q,R){return R.Write(Q);}O=(((w.Curried3(u.map2))(P))(K(N)))(M);return u.forall(function(Q){return Q!=null;},O)?{$:1,$0:r.collect(function(Q){return Q.$0;},O)}:null;});};m.rCors=function(K){return i.New$1(function(L){function M(N,O){var P,Q;return[N,w.DeleteEmptyFields({DefaultAllows:(P=null,P?P.$0:void 0),EndPoint:(Q={$:1,$0:O},Q?Q.$0:void 0)},["DefaultAllows","EndPoint"])];}return r.map(function(N){return M(N[0],N[1]);},K.Parse(L));},function(L){var M,N;M=(N=w.GetOptional(L.EndPoint),N==null?{$:1,$0:null}:{$:0,$0:N.$0});return M.$==1?{$:1,$0:[g.get_Empty()]}:K.Write(M.$0);});};m.rDateTime=function(){n.$cctor();return n.rDateTime;};m.rWildcardList=function(K){return i.New$1(function(L){function M(N){return function(O){function P(Q,R){return(M(Q))(new q.T({$:1,$0:R,$1:O}));}return N.Segments.$==0?[[N,q.rev(O)]]:r.collect(function(Q){return P(Q[0],Q[1]);},K.Parse(N));};}return(M(L))(q.T.Empty);},function(L){var M;M=q.map(K.Write,L);return q.forAll(function(N){return N!=null;},M)?{$:1,$0:r.collect(function(N){return N.$0;},M)}:null;});};m.rWildcardArray=function(K){return i.New$1(function(L){function M(N){return function(O){function P(Q,R){return(M(Q))(new q.T({$:1,$0:R,$1:O}));}return N.Segments.$==0?[[N,u.ofList(q.rev(O))]]:r.collect(function(Q){return P(Q[0],Q[1]);},K.Parse(N));};}return(M(L))(q.T.Empty);},function(L){var M;M=u.map(K.Write,L);return u.forall(function(N){return N!=null;},M)?{$:1,$0:r.collect(function(N){return N.$0;},M)}:null;});};m.rWildcard=function(){n.$cctor();return n.rWildcard;};m.rBool=function(){n.$cctor();return n.rBool;};m.rSingle=function(){n.$cctor();return n.rSingle;};m.rUInt64=function(){n.$cctor();return n.rUInt64;};m.rInt64=function(){n.$cctor();return n.rInt64;};m.rUInt=function(){n.$cctor();return n.rUInt;};m.rUInt16=function(){n.$cctor();return n.rUInt16;};m.rInt16=function(){n.$cctor();return n.rInt16;};m.rByte=function(){n.$cctor();return n.rByte;};m.rSByte=function(){n.$cctor();return n.rSByte;};m.rDouble=function(){n.$cctor();return n.rDouble;};m.rInt=function(){n.$cctor();return n.rInt;};m.rGuid=function(){n.$cctor();return n.rGuid;};m.rChar=function(){n.$cctor();return n.rChar;};m.rString=function(){n.$cctor();return n.rString;};m.rRoot=function(){n.$cctor();return n.rRoot;};n.$cctor=function(){n.$cctor=a.ignore;function K(L){var M,N;M=(N=0,[D.TryParseInt32(L,{get:function(){return N;},set:function(O){N=O;}}),N]);return M[0]?{$:1,$0:M[1]}:null;}n.Empty=i.New$1(function(){return[];},function(){return null;});n.rRoot=i.New(function(L){return[L];},[]);n.rString=i.New$1(function(L){var M,N;M=L.Segments;return M.$==0?[[L,""]]:(N=e.read(M.$0),N!=null&&N.$==1?[[g.New(M.$1,L.QueryArgs,L.FormData,L.Method,L.Body),N.$0]]:[]);},function(L){return{$:1,$0:[g.Segment$2(L==null?"null":e.write(L))]};});n.rChar=i.New$1(function(L){var M,N,O;M=L.Segments;return M.$==1?(N=e.read(M.$0),N!=null&&N.$==1&&(N.$0.length===1&&(O=N.$0,true))?[[g.New(M.$1,L.QueryArgs,L.FormData,L.Method,L.Body),G.Parse(O)]]:[]):[];},function(L){return{$:1,$0:[g.Segment$2(L)]};});n.rGuid=i.New$1(function(L){var M,N;M=L.Segments;return M.$==1?(N=null,I.TryParse(M.$0,{get:function(){return N;},set:function(O){N=O;}})?[[g.New(M.$1,L.QueryArgs,L.FormData,L.Method,L.Body),N]]:[]):[];},function(L){return{$:1,$0:[g.Segment$2(p(L))]};});n.rInt=i.New$1(function(L){var M,N;M=L.Segments;return M.$==1?(N=0,D.TryParseInt32(M.$0,{get:function(){return N;},set:function(O){N=O;}})?[[g.New(M.$1,L.QueryArgs,L.FormData,L.Method,L.Body),N]]:[]):[];},function(L){return{$:1,$0:[g.Segment$2(p(L))]};});n.rDouble=i.New$1(function(L){var M,N,O;M=L.Segments;return M.$==1?(N=0,(O=a.Number(M.$0),a.isNaN(O)?false:(N=O,true))?[[g.New(M.$1,L.QueryArgs,L.FormData,L.Method,L.Body),N]]:[]):[];},function(L){return{$:1,$0:[g.Segment$2(p(L))]};});n.rSByte=i.New$1(function(L){var M,N;M=L.Segments;return M.$==1?(N=0,D.TryParseSByte(M.$0,{get:function(){return N;},set:function(O){N=O;}})?[[g.New(M.$1,L.QueryArgs,L.FormData,L.Method,L.Body),N]]:[]):[];},function(L){return{$:1,$0:[g.Segment$2(p(L))]};});n.rByte=i.New$1(function(L){var M,N;M=L.Segments;return M.$==1?(N=0,D.TryParseByte(M.$0,{get:function(){return N;},set:function(O){N=O;}})?[[g.New(M.$1,L.QueryArgs,L.FormData,L.Method,L.Body),N]]:[]):[];},function(L){return{$:1,$0:[g.Segment$2(p(L))]};});n.rInt16=i.New$1(function(L){var M,N;M=L.Segments;return M.$==1?(N=0,D.TryParseInt16(M.$0,{get:function(){return N;},set:function(O){N=O;}})?[[g.New(M.$1,L.QueryArgs,L.FormData,L.Method,L.Body),N]]:[]):[];},function(L){return{$:1,$0:[g.Segment$2(p(L))]};});n.rUInt16=i.New$1(function(L){var M,N;M=L.Segments;return M.$==1?(N=0,D.TryParseUInt16(M.$0,{get:function(){return N;},set:function(O){N=O;}})?[[g.New(M.$1,L.QueryArgs,L.FormData,L.Method,L.Body),N]]:[]):[];},function(L){return{$:1,$0:[g.Segment$2(p(L))]};});n.rUInt=i.New$1(function(L){var M,N;M=L.Segments;return M.$==1?(N=0,D.TryParseUInt32(M.$0,{get:function(){return N;},set:function(O){N=O;}})?[[g.New(M.$1,L.QueryArgs,L.FormData,L.Method,L.Body),N]]:[]):[];},function(L){return{$:1,$0:[g.Segment$2(p(L))]};});n.rInt64=i.New$1(function(L){var M,N;M=L.Segments;return M.$==1?(N=0,D.TryParseInt64(M.$0,{get:function(){return N;},set:function(O){N=O;}})?[[g.New(M.$1,L.QueryArgs,L.FormData,L.Method,L.Body),N]]:[]):[];},function(L){return{$:1,$0:[g.Segment$2(p(L))]};});n.rUInt64=i.New$1(function(L){var M,N;M=L.Segments;return M.$==1?(N=0,D.TryParseUInt64(M.$0,{get:function(){return N;},set:function(O){N=O;}})?[[g.New(M.$1,L.QueryArgs,L.FormData,L.Method,L.Body),N]]:[]):[];},function(L){return{$:1,$0:[g.Segment$2(p(L))]};});n.rSingle=i.New$1(function(L){var M,N,O;M=L.Segments;return M.$==1?(N=0,(O=a.Number(M.$0),a.isNaN(O)?false:(N=O,true))?[[g.New(M.$1,L.QueryArgs,L.FormData,L.Method,L.Body),N]]:[]):[];},function(L){return{$:1,$0:[g.Segment$2(p(L))]};});n.rBool=i.New$1(function(L){var M,N,O;M=L.Segments;return M.$==1?(N=(O=null,[D.TryParseBool(M.$0,{get:function(){return O;},set:function(P){O=P;}}),O]),N[0]?[[g.New(M.$1,L.QueryArgs,L.FormData,L.Method,L.Body),N[1]]]:[]):[];},function(L){return{$:1,$0:[g.Segment$2(L?"True":"False")]};});n.rWildcard=i.New$1(function(L){return[[g.New(q.T.Empty,L.QueryArgs,L.FormData,L.Method,L.Body),o.concat("/",L.Segments)]];},function(L){return{$:1,$0:[g.Segment$2(L)]};});n.rDateTime=i.New$1(function(L){var M,N,O,P,Q,R,S,T,U;M=L.Segments;return M.$==1?(N=M.$0,N.length===19&&N[4]==="-"&&N[7]==="-"&&N[10]==="-"&&N[13]==="."&&N[16]==="."?(O=K(J.string(N,{$:1,$0:0},{$:1,$0:3})),(P=K(J.string(N,{$:1,$0:5},{$:1,$0:6})),(Q=K(J.string(N,{$:1,$0:8},{$:1,$0:9})),(R=K(J.string(N,{$:1,$0:11},{$:1,$0:12})),(S=K(J.string(N,{$:1,$0:14},{$:1,$0:15})),(T=K(J.string(N,{$:1,$0:17},{$:1,$0:18})),O!=null&&O.$==1&&(P!=null&&P.$==1&&(Q!=null&&Q.$==1&&(R!=null&&R.$==1&&(S!=null&&S.$==1&&(T!=null&&T.$==1&&(U=[Q.$0,R.$0,P.$0,S.$0,T.$0,O.$0],true))))))?[[g.New(M.$1,L.QueryArgs,L.FormData,L.Method,L.Body),(new a.Date(U[5],U[2]-1,U[0],U[1],U[3],U[4])).getTime()]]:[])))))):[]):[];},function(L){var M,N;function O(P){var Q;Q=p(P);return Q.length===1?"0"+Q:Q;}return{$:1,$0:[g.Segment$2((M=p((new a.Date(L)).getFullYear()),(N=M.length,N===1?"000"+M:N===2?"00"+M:N===3?"0"+M:M))+"-"+O((new a.Date(L)).getMonth()+1)+"-"+O((new a.Date(L)).getDate())+"-"+O((new a.Date(L)).getHours())+"."+O((new a.Date(L)).getMinutes())+"."+O((new a.Date(L)).getSeconds()))]};});};}(self));
